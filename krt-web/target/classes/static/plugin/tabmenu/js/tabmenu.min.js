$(function(){$(".J_menuItem").each(function(a){if(!$(this).attr("data-index")){$(this).attr("data-index",a)}});$(".J_menuItem").on("click",menuItem);$(".J_menuTabs").on("click",".J_menuTab i.fa-close",closeTab);$(".J_tabCloseOther").on("click",closeOtherTabs);$(".J_tabShowActive").on("click",showActiveTab);$(".J_menuTabs").on("click",".J_menuTab",activeTab);$(".J_menuTabs").on("dblclick",".J_menuTab",refreshTab);$(".J_tabLeft").on("click",scrollTabLeft);$(".J_tabRight").on("click",scrollTabRight);$(".J_tabCloseAll").on("click",function(){$(".page-tabs-content").children("[data-id]").not(":first").each(function(){$('.J_iframe[data-id="'+$(this).data("id")+'"]').remove();$(this).remove()});$(".page-tabs-content").children("[data-id]:first").each(function(){$('.J_iframe[data-id="'+$(this).data("id")+'"]').show();$(this).addClass("active")});$(".page-tabs-content").css("margin-left","0")})});function calSumWidth(b){var a=0;$(b).each(function(){a+=$(this).outerWidth(true)});return a}function scrollToTab(d){var e=calSumWidth($(d).prevAll()),g=calSumWidth($(d).nextAll());var b=calSumWidth($(".content-tabs").children().not(".J_menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").outerWidth()<a){f=0}else{if(g<=(a-$(d).outerWidth(true)-$(d).next().outerWidth(true))){if((a-$(d).next().outerWidth(true))>g){f=e;var c=d;while((f-$(c).outerWidth())>($(".page-tabs-content").outerWidth()-a)){f-=$(c).prev().outerWidth();c=$(c).prev()}}}else{if(e>(a-$(d).outerWidth(true)-$(d).prev().outerWidth(true))){f=e-$(d).prev().outerWidth(true)}}}$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")}function scrollTabLeft(){var e=Math.abs(parseInt($(".page-tabs-content").css("margin-left")));var b=calSumWidth($(".content-tabs").children().not(".J_menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").width()<a){return false}else{var c=$(".J_menuTab:first");var d=0;while((d+$(c).outerWidth(true))<=e){d+=$(c).outerWidth(true);c=$(c).next()}d=0;if(calSumWidth($(c).prevAll())>a){while((d+$(c).outerWidth(true))<(a)&&c.length>0){d+=$(c).outerWidth(true);c=$(c).prev()}f=calSumWidth($(c).prevAll())}}$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")}function scrollTabRight(){var e=Math.abs(parseInt($(".page-tabs-content").css("margin-left")));var b=calSumWidth($(".content-tabs").children().not(".J_menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").width()<a){return false}else{var c=$(".J_menuTab:first");var d=0;while((d+$(c).outerWidth(true))<=e){d+=$(c).outerWidth(true);c=$(c).next()}d=0;while((d+$(c).outerWidth(true))<(a)&&c.length>0){d+=$(c).outerWidth(true);c=$(c).next()}f=calSumWidth($(c).prevAll());if(f>0){$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")}}}function menuItem(){$(".J_menuItem ").parent().removeClass("active");$(this).parent().addClass("active");var e=$(this).attr("href"),d=$(this).data("index"),c=$.trim($(this).text()),b=$(this).attr("icon"),a=true;if(e==undefined||$.trim(e).length==0){return false}openTab(e,c,false,null,b);return false}function closeTab(){var c=$(this).parents(".J_menuTab").data("id");var b=$(this).parents(".J_menuTab").width();if($(this).parents(".J_menuTab").hasClass("active")){if($(this).parents(".J_menuTab").next(".J_menuTab").size()){var a=$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").data("id");$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").addClass("active");$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==a){$(this).show().siblings(".J_iframe").hide();return false}});var d=parseInt($(".page-tabs-content").css("margin-left"));if(d<0){$(".page-tabs-content").animate({marginLeft:(d+b)+"px"},"fast")}$(this).parents(".J_menuTab").remove();$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==c){$(this).remove();return false}})}if($(this).parents(".J_menuTab").prev(".J_menuTab").size()){var a=$(this).parents(".J_menuTab").prev(".J_menuTab:last").data("id");$(this).parents(".J_menuTab").prev(".J_menuTab:last").addClass("active");$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==a){$(this).show().siblings(".J_iframe").hide();return false}});$(this).parents(".J_menuTab").remove();$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==c){$(this).remove();return false}})}}else{$(this).parents(".J_menuTab").remove();$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==c){$(this).remove();return false}});scrollToTab($(".J_menuTab.active"))}return false}function closeOtherTabs(){$(".page-tabs-content").children("[data-id]").not(":first").not(".active").each(function(){$('.J_iframe[data-id="'+$(this).data("id")+'"]').remove();$(this).remove()});$(".page-tabs-content").css("margin-left","0")}function showActiveTab(){scrollToTab($(".J_menuTab.active"))}function activeTab(){if(!$(this).hasClass("active")){var a=$(this).data("id");$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==a){$(this).show().siblings(".J_iframe").hide();
    return false}});$(this).addClass("active").siblings(".J_menuTab").removeClass("active");scrollToTab(this)}}function refreshTab(){var b=$('.J_iframe[data-id="'+$(this).data("id")+'"]');var a=b.attr("src");var c=layer.load();b.attr("src",a).load(function(){layer.close(c)})}function getActiveTab(){return $(".J_iframe:visible")}function hashcode(e){var d=0,b,c,a;if(e.length===0){return d}for(b=0,a=e.length;b<a;b++){c=e.charCodeAt(b);d=((d<<5)-d)+c;d|=0}return d}function openTab(a,j,e,f,l){var h=a,k=hashcode(a),b=j,i=f||"";flag=true;console.log("s==============="+k);i=i.replace("iframe","");if(h==undefined||top.$.trim(h).length==0){return false}if(!e){top.$(".J_menuTab").each(function(){if(top.$(this).data("id")==h){if(!top.$(this).hasClass("active")){top.$(this).addClass("active").siblings(".J_menuTab").removeClass("active");scrollToTab(top.$(this));top.$(".J_mainContent .J_iframe").each(function(){if(top.$(this).data("id")==h){top.$(this).show().siblings(".J_iframe").hide();return false}})}flag=false;return false}})}if(e||flag){var g='<a href="javascript:;" id="tab'+k+'" class="active J_menuTab" data-id="'+h+'"><i class="'+l+' i_menu"></i>'+b+' <i class="fa fa-close i_close"></i></a>';top.$(".J_menuTab").removeClass("active");var d='<iframe class="J_iframe" data-preid="'+i+'" id="iframe'+k+'" width="100%" height="100%" src="'+h+'" frameborder="0" data-id="'+h+'" seamless></iframe>';top.$(".J_mainContent").find("iframe.J_iframe").hide().parents(".J_mainContent").append(d);var c=layer.load();top.$(".J_mainContent iframe:visible").load(function(){layer.close(c)});top.$(".J_menuTabs .page-tabs-content").append(g);scrollToTab(top.$(".J_menuTab.active"))}return false};